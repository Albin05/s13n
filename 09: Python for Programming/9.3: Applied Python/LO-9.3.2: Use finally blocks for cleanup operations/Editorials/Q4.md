### Q4 Solution: Transaction Handler

```python
def transfer_money(accounts, from_acc, to_acc, amount):
    print("Transaction started")
    try:
        if accounts[from_acc] < amount:
            raise ValueError(f"Insufficient funds in {from_acc}")
        accounts[from_acc] -= amount
        accounts[to_acc] += amount
        print(f"Transferred ${amount} from {from_acc} to {to_acc}")
    except ValueError as e:
        print(f"Failed: {e}")
    finally:
        print("Transaction ended")
        print(f"Balances: {accounts}")

accounts = {'Alice': 1000, 'Bob': 500}
transfer_money(accounts, 'Alice', 'Bob', 200)
print()
transfer_money(accounts, 'Bob', 'Alice', 2000)
```
